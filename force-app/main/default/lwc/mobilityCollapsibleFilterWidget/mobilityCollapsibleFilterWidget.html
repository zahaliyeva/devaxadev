<template>
    <div class="collapsible-filter-widget singleMode filter-mode" tabindex="0" role="button" onclick={openDropdown}>
        <div class="collapsible-filter-body">
            <div class="dropdown-trigger">
                <div class="title">{label}</div>
                <div class="selection">
                    <div class="selection__text">
                        <div class="selected-values">{selectedValuesText}</div>
                        <span></span>
                    </div>
                    <span class="svgwrapper down-arrow">
                        <svg class="icon" name="chevrondown" viewBox="0 0 100 100">
                            <path
                                d="M79.5 38.9l-28 28.2c-.8.8-2.2.8-3 0L20.6 38.9c-.8-.8-.8-2.2 0-3l3-3c.8-.8 2.2-.8 3 0l21.9 22.2c.8.8 2.2.8 3 0l22-22.1c.8-.8 2.2-.8 3 0l3 3c.7.8.7 2.1 0 2.9z">
                            </path>
                        </svg>
                    </span>
                </div>
            </div>
        </div>
    </div>
    <div style="position: relative;" if:true={showDropdown}>
        <section class="slds-popover">
            <div class="slds-popover__body">
                <div class="data-table searchableTable">
                    <div class="searchContainer" onclick={noop}>
                        <span class="search-icon">
                            <span>
                                <svg
                                    aria-hidden="true" class="slds-icon slds-icon_xx-small slds-icon-text-default"
                                    viewBox="0 0 52 52">
                                    <path
                                        d="M49.598 45.298l-13.4-13.3c2.7-3.8 4.1-8.6 3.4-13.7-1.2-8.6-8.2-15.4-16.9-16.2-11.8-1.2-21.8 8.8-20.6 20.7.8 8.6 7.6 15.7 16.2 16.9 5.1.7 9.9-.7 13.7-3.4l13.3 13.3c.6.6 1.5.6 2.1 0l2.1-2.1c.6-.6.6-1.6.1-2.2zm-41.6-24.4c0-7.1 5.8-12.9 12.9-12.9 7.1 0 12.9 5.8 12.9 12.9 0 7.1-5.8 12.9-12.9 12.9-7.1 0-12.9-5.7-12.9-12.9z"
                                        fill-rule="evenodd">
                                    </path>
                                </svg>
                            </span>
                        </span>
                        <input
                            type="text" class="select" placeholder="Cerca valori..." value={_searchFilter} onkeyup={handleSearch} >
                        <button if:true={_searchFilter} class="clear-icon" onclick={clearSearch}>
                            <span>
                                <svg aria-hidden="true" class="slds-icon slds-icon_xx-small slds-icon-text-default" viewBox="0 0 52 52">
                                    <path d="M31 25.4l13-13.1c.6-.6.6-1.5 0-2.1l-2-2.1c-.6-.6-1.5-.6-2.1 0L26.8 21.2c-.4.4-1 .4-1.4 0L12.3 8c-.6-.6-1.5-.6-2.1 0l-2.1 2.1c-.6.6-.6 1.5 0 2.1l13.1 13.1c.4.4.4 1 0 1.4L8 39.9c-.6.6-.6 1.5 0 2.1l2.1 2.1c.6.6 1.5.6 2.1 0L25.3 31c.4-.4 1-.4 1.4 0l13.1 13.1c.6.6 1.5.6 2.1 0L44 42c.6-.6.6-1.5 0-2.1L31 26.8c-.4-.4-.4-1 0-1.4z"></path>
                                </svg>
                            </span>
                        </button>
                    </div>
                    <div class="data-table-rows">
                        <div class="select-all-row" onclick={toggleAll}>
                            <input type="checkbox" tabindex="-1" class="style-guide input-checkbox" checked={isAllSelected}>
                            <div>Tutti</div>
                        </div>
                        <div class="select-items">
                            <template for:each={optionsChecked} for:item='item'>
                                <div if:false={item.disabled} class="select-item-row" key={item.id} onclick={toggleItem} data-id={item.id}>
                                    <input type="checkbox" tabindex="-1" class="style-guide input-checkbox" checked={item.checked}>
                                    <div>{item.id}</div>
                                </div>
                                <div if:true={item.disabled} class="select-item-row" key={item.id}>
                                    <span></span>
                                    <div style="font-size: 11px;">{item.id}</div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
</template>